<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css"><!-- node_modules/normalize.css/normalize.css -->
    <link rel="stylesheet" href="build/styles.css">
  </head>
  <body>

<div class="add-microservice">
  <form onsubmit="event.preventDefault(); app.addNewJenkinsJob()">
    <input type="text" id="JenkinsJobURL" placeholder="Jenkins URL" />
    <input type="submit" value="Add" />
  </form>
  <i class="fa fa-plus-square-o" aria-hidden="true"></i>
</div>

  <div id="pipeline-container" class="container">

    <div id="ms-1" class="microservice "><!--stages-expand-->
      <h1>
        Microservice Three:
        <span>Blue/Green</span>
      </h1>
      <div class="microservice-actions">
        <a href="#" onclick="app.removePipeline('pipeline-container','ms-1');return false;"><i class="fa fa-trash" aria-hidden="true"></i></a>
        <a href="#" onclick="app.expandPipeline('ms-1') ;return false;"><i class="fa fa-expand" aria-hidden="true"></i></a>
        <a href="#" onclick="app.compressPipeline( 'ms-1') ;return false;"><i class="fa fa-compress" aria-hidden="true"></i></a>
      </div>
      <div class="stages">
        <div class="stage">
          <h2>Development</h2>
          <div id="ms-1-1" class="commit-container paused_pending_input"
          style="animation-duration: 5s;">
            <div class="commit"></div>
          </div>
        </div>
        <div class="stage">
          <h2>QE</h2>
          <div id="ms-1-2" class="commit-container commit-red"
          style="animation-duration: 5s;">
            <div class="commit"></div>
          </div>
        </div>
        <div class="stage">
          <h2>Security</h2>
          <div id="ms-1-3-1" class="commit-container in_progress"
          style="animation-duration: 15s;">
            <div class="commit"></div>
          </div>


          <div id="ms-1-2-2" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-1-2-3" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-1-2-4" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>

        </div>
        <div class="stage">
          <h2>Staging</h2>
          <div id="ms-1-4" class="commit-container" style="animation-duration: 550ms;">
            <div class="commit"></div>
          </div>
        </div>
      </div>
      <div class="stage stage-lg">
        <h2>Production</h2>
        <div id="ms-prod-1-1" class="commit-container commit-blue commit-top"
          style="animation-duration: 2s;">
          <div class="commit"></div>
        </div>
        <div id="ms-prod-1-2" class="commit-container commit-green commit-bottom"
          style="animation-duration: 2s;">
          <div class="commit"></div>
        </div>
        <div id="ms-prod-1-3" class="commit-container commit-green commit-bottom"
          style="animation-duration: 10s;">
          <div class="commit"></div>
        </div>

      </div>
    </div>


    <div class="microservice" id="microserviceLarge"><!-- microservice-large -->
      <h1>
        Microservice Large:
        <span>Blue/Green</span>
      </h1>
      <div class="microservice-actions">
        <a href="#" onclick="app.removePipeline('pipeline-container','microserviceLarge');return false;"><i class="fa fa-trash" aria-hidden="true"></i></a>
        <a href="#" onclick="app.expandPipeline('microserviceLarge') ;return false;"><i class="fa fa-expand" aria-hidden="true"></i></a>
        <a href="#" onclick="app.compressPipeline( 'microserviceLarge') ;return false;"><i class="fa fa-compress" aria-hidden="true"></i></a>
      </div>
      <div class="stages">
        <div class="stage">
          <h2>Development</h2>
          <div id="ms-3-1" class="commit-container paused_pending_input"
          style="animation-duration: 5s;">
            <div class="commit"></div>
          </div>
        </div>

        <div class="stage" id="stage"> <!-- TODO: Meassure height of stage, divided by 25 and use that number on the stage- class -->
          <h2>Security</h2>
          <div id="ms-3-2-1" class="commit-container in_progress"
          style="animation-duration: 15s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-2" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-3" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-4" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-5" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-6" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-7" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-8" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-9" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-10" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-11" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-12" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-13" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-14" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-15" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-16" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-17" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-18" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-19" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-20" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-21" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-22" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-23" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-24" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-25" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-26" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-27" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-28" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-29" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-30" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-31" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-32" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-33" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-34" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-35" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-36" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-37" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-38" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-39" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-40" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-41" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-42" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-43" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-44" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-45" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-46" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-47" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-48" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-49" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-50" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-51" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-52" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-53" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-54" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-55" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-56" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-57" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-58" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-59" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-60" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-61" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-62" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-63" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-64" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>
          <div id="ms-3-2-65" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-66" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-67" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-68" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-69" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

          <div id="ms-3-2-70" class="commit-container in_progress"
          style="animation-duration: 58s;">
            <div class="commit"></div>
          </div>

        </div>


      </div>

      <div class="stage stage-lg">
        <h2>Production</h2>
        <p><strong>2386</strong> commits</p>
        <div id="ms-3-3" class="commit-container">
          <div class="commit" style="transform: scale3d(.075, .075, .075)"></div>
        </div>
      </div>
    </div>




    <div id="ms-2" class="microservice">
      <h1>
        Microservice Three:
        <span>Blue/Green</span>
      </h1>
      <div class="microservice-actions">
        <a href="#" onclick="app.removePipeline('pipeline-container','ms-2');return false;"><i class="fa fa-trash" aria-hidden="true"></i></a>
        <a href="#" onclick="app.expandPipeline('ms-2') ;return false;"><i class="fa fa-expand" aria-hidden="true"></i></a>
        <a href="#" onclick="app.compressPipeline( 'ms-2') ;return false;"><i class="fa fa-compress" aria-hidden="true"></i></a>
      </div>
      <div class="stages">
        <div class="stage">
          <h2>Development</h2>
          <div id="ms-4-1" class="commit-container paused_pending_input"
          style="animation-duration: 5s;">
            <div class="commit"></div>
          </div>
        </div>
        <div class="stage">
          <h2>QE</h2>
          <div id="ms-4-2" class="commit-container commit-red"
          style="animation-duration: 5s;">
            <div class="commit"></div>
          </div>
        </div>
        <div class="stage">
          <h2>Security</h2>
          <div id="ms-4-3-1" class="commit-container in_progress"
          style="animation-duration: 15s;">
            <div class="commit"></div>
          </div>

          <div id="ms-4-3-2" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>

          <div id="ms-4-3-3" class="commit-container in_progress"
          style="animation-duration: 38s;">
            <div class="commit"></div>
          </div>

        </div>
        <div class="stage">
          <h2>Staging</h2>
          <div id="ms-4-4-1" class="commit-container" style="animation-duration: 550ms;">
            <div class="commit"></div>
          </div>
          <div id="ms-4-4-2" class="commit-container in_progress"
          style="animation-duration: 28s;">
            <div class="commit"></div>
          </div>


        </div>
      </div>
      <div class="stage stage-lg">
        <h2>Production</h2>
        <div id="ms-prod-4-1" class="commit-container"
          style="animation-duration: 2s;">
          <div class="commit"></div>
        </div>
      </div>
    </div>




<!--
    <div class="microservice">
      <h1>
        Microservice Four:
        <span>In production</span>
      </h1>
      <div class="stages">
        <div class="stage">
          <h2>Development</h2>
          <div id="ms-4-1" class="commit hidden" style="transform: translate3d(0%, 0, 0);"></div>
        </div>&lt;!&ndash; /stage &ndash;&gt;
        <div class="stage">
          <h2>QE</h2>
          <div id="ms-4-2" class="commit hidden" style="transform: translate3d(0%, 0, 0);"></div>
        </div>&lt;!&ndash; /stage &ndash;&gt;
        <div class="stage">
          <h2>Security</h2>
          <div id="ms-4-3" class="commit hidden" style="transform: translate3d(0%, 0, 0);"></div>
        </div>&lt;!&ndash; /stage &ndash;&gt;
      </div>&lt;!&ndash; /stages &ndash;&gt;
      <div class="stage stage-lg">
        <h2>Production</h2>
        <div id="ms-prod-4-1" class="commit " style="transform: translate3d(50%, -22%, 0);"></div>
        <div id="ms-prod-4-2" class="commit commit-yellow" style="transform: translate3d(50%, 0, 0);"></div>
        <div id="ms-prod-4-3" class="commit commit-yellow" style="transform: translate3d(50%, 22%, 0);"></div>
      </div>&lt;!&ndash; /stage-lg &ndash;&gt;
    </div>&lt;!&ndash; /microservice &ndash;&gt;

    <div class="microservice">
      <h1>
        Microservice Five:
        <span>Fail</span>
      </h1>
      <div class="stages">
        <div class="stage">
          <h2>Development</h2>
          <div id="ms-5-1" class="commit hidden" style="transform: translate3d(50%, 0, 0);"></div>
        </div>&lt;!&ndash; /stage &ndash;&gt;
        <div class="stage">
          <h2>Staging</h2>
          <div id="ms-5-2" class="commit hidden" style="transform: translate3d(50%, 0, 0);"></div>
        </div>&lt;!&ndash; /stage &ndash;&gt;
      </div>&lt;!&ndash; /stages &ndash;&gt;
      <div class="stage stage-lg">
        <h2>Production</h2>
        <div id="ms-prod-5-1" class="commit" style="transform: translate3d(50%, 0, 0);"></div>
      </div>&lt;!&ndash; /stage-lg &ndash;&gt;
    </div>&lt;!&ndash; /microservice &ndash;&gt;
-->

  </div><!-- /container -->

  <div id="traffic-container">
    <canvas id="traffic"></canvas>

    <div id="ms-prod-0-1" class="internet-traffic-source">
        <div class="commit"></div>
    </div>
    <div class="coord-display"></div>
  </div>

  <script type="x-shader/x-vertex" id="vertexshader">
      // increase FLASHPOINT to make the flash happen later
      #define FLASHPOINT 5.0
      #define FLASHPOINT_STRENGTH 1.5
      #define PI 3.14159
      uniform float TIMER_MAX;
      uniform float size;

      attribute float alive;
      attribute vec3  endPosition;
      attribute vec3  startColor;
      attribute vec3  endColor;
      attribute float timer;

      varying float vAlive;
      varying float vProgress;
      varying float vFlashPoint;
      varying vec3  vMixColor;

      varying float vBurst;

      void main() {
          vAlive      = alive;
          vProgress   = 1.0 - timer / TIMER_MAX;
          vMixColor   = mix( startColor, endColor, vProgress );
          vFlashPoint = max( 0.0, (1.0 + FLASHPOINT) * vProgress - FLASHPOINT ); // https://www.desmos.com/calculator/nymymapyel
          vec3 newPosition = mix( position, endPosition, vProgress );
          float yDist = abs(endPosition.y - position.y);
          newPosition.x += yDist / 2.0 * sin( PI * vProgress );
          vec4 mvPosition = modelViewMatrix * vec4( newPosition, 1.0 );
          gl_PointSize = size * (1.0 + vFlashPoint * FLASHPOINT_STRENGTH);
          gl_Position = projectionMatrix * mvPosition;
      }
  </script>

  <script type="x-shader/x-fragment" id="fragmentshader">
      uniform sampler2D texture;

      varying float vAlive;
      varying float vProgress;
      varying float vFlashPoint;
      varying vec3  vMixColor;

      void main() {
          if ( vAlive == 0.0 ) discard;
          gl_FragColor = vec4( vMixColor, 1.0 - vFlashPoint*vFlashPoint ) * texture2D( texture, gl_PointCoord );;
      }
  </script>


<script>

/*
var microserviceLarge = document.getElementById("microserviceLarge");

function setStageClass(){
  var stageHeight = document.getElementById('stage').offsetHeight;
  var stageAmount = Math.floor(stageHeight / 25);
  var classToAdd = ' ' + 'microservice-large-' + stageAmount;
  microserviceLarge.className += classToAdd;
}

window.onload = setStageClass();

window.onresize = function() {
  microserviceLarge.className = "microservice microservice-large";
  setStageClass();
}
*/

</script>

  <script src="build/bundle.js"></script>
  <script src="https://use.fontawesome.com/c52497d1ee.js"></script>
  </body>
</html>
